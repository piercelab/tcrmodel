{% extends "test_layout.html" %}
{% block head %}
{{ super() }}
<link rel="stylesheet" href="{{ url_for('static', filename='css/aa_colors.css') }}">
<script type="text/javascript" src="{{ url_for('static', filename='js/aa_funcs.js') }}"></script>
<script src='https://cdn.rawgit.com/arose/ngl/v2.0.0-dev.32/dist/ngl.js'></script>
{% endblock %}
{% block title %}TCRpMHC Model{% endblock %}
{% block article %}
<div class="p-3 m-3">
  <div class="row px-3">
    <div class="container">
      <div class="row d-flex justify-content-center">
        <div class="col-2 border bg-light">
          <p class="mt-2 mb-1">Display as:</p>
          <select class="form-select form-select-sm" id="reprsdd">
            <option selected="">cartoon</option>
            <option>spacefill</option>
            <option>licorice</option>
            <option>surface</option>
          </select>
          <p class="mt-4 mb-1">Color by:</p>
          <select class="form-select form-select-sm mt-0 mb-4" id="colorsdd">
            <option value="uniform">light grey</option>
            <option value="chainname" selected="">chain name</option>
            <option value="residueindex">residue index</option>
            <option value="sstruc">secondary structure</option>
            <option value="element">element</option>
            <option value="bfactor">bfactor</option>
          </select>
          <input type="checkbox" class="form-check-input" id="spin-checkbox">
          <label for="spin-checkbox" class="form-check-label">Spin</label>
        </div>
	<div class="col-5">
	  <div class="border border-success">
	    <span class="text-primary p-2 fs-6 lh-lg">TCRpMHC model viewer </span>
            <div class="float-end m-1">
	      <button type="button" class="btn btn-outline-primary btn-sm" id="centerbtn">Center</button>
	      <button type="button" class="btn btn-outline-primary btn-sm" id="alignbtn">Align</button>
            </div>
	    <div style="height: 275px;" class="w-100" id="nglviewport"></div>
	  </div>
	</div>
	<div class="col-3 py-3">
	  <p class = "text-start">
	    Job ID : <a href="{{ url_for('res_tcrpmhc', jobid=jobid) }}">{{ jobid }}</a>
	    <BR>
	    Status : Modeling completed
	  </p>
	  <h6><a href={{ modelfname }} download>Download PDB file</a></h6>
	</div>
      </div>
    </div>
    <div class="row p-3">
      <div class="accordion accordion-flush" id="accordionFlushExample">
	<div class="accordion-item">
	  <h2 class="accordion-header" id="flush-headingOne">
	    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseOne" aria-expanded="false" aria-controls="flush-collapseOne">
	      TCRpMHC complex templates
	    </button>
	  </h2>
	  <div id="flush-collapseOne" class="accordion-collapse collapse" aria-labelledby="flush-headingOne" data-bs-parent="#accordionFlushExample">
	    <div class="accordion-body">
	      <table class="table table-striped table-light">
		<thead>
		  <tr>
		    <th>Name</th>
		    <th>Template PDB</th>
		  </tr>
		</thead>
		<tbody>
		  <tr>
		    <th scope="row">Tcr &alpha; CDR1</th>
		    <td>
                      {% if tj.acdr1_tmplt_id != "NA" %}
                        <a href="https://www.rcsb.org/structure/{{ tj.acdr1_tmplt_id[:4] }}">{{ tj.acdr1_tmplt_id }}</a>
                      {% else %}
                        NA
                      {% endif %}
                    </td>
		  </tr>
		  <tr>
		    <th scope="row">Tcr &alpha; CDR2-HV4</th>
		    <td>
                      {% if tj.acdr2hv4_tmplt_id != "NA" %}
                        <a href="https://www.rcsb.org/structure/{{ tj.acdr2hv4_tmplt_id[:4] }}">{{ tj.acdr2hv4_tmplt_id }}</a>
                      {% else %}
                        NA
                      {% endif %}
                    </td>
		  </tr>
		  <tr>
		    <th scope="row">Tcr &alpha; CDR3</th>
		    <td>
                      {% if tj.acdr3_tmplt_id != "NA" %}
                        <a href="https://www.rcsb.org/structure/{{ tj.acdr3_tmplt_id[:4] }}">{{ tj.acdr3_tmplt_id }}</a>
                      {% else %}
                        NA
                      {% endif %}
                    </td>
		  </tr>
		  <tr>
		    <th scope="row">Tcr &alpha; framework</th>
		    <td>
                      {% if tj.afr_tmplt_id != "NA" %}
                        <a href="https://www.rcsb.org/structure/{{ tj.afr_tmplt_id[:4] }}">{{ tj.afr_tmplt_id }}</a>
                      {% else %}
                        NA
                      {% endif %}
                    </td>
		  </tr>
		  <tr>
		    <th scope="row">Tcr &alpha; germline</th>
		    <td>
                      {% if tj.agm_tmplt_id != "NA" %}
                        <a href="https://www.rcsb.org/structure/{{ tj.agm_tmplt_id[:4] }}">{{ tj.agm_tmplt_id }}</a>
                      {% else %}
                        NA
                      {% endif %}
                    </td>
		  </tr>
		  <tr>
		    <th scope="row">Tcr &beta; CDR1</th>
		    <td>
                      {% if tj.bcdr1_tmplt_id != "NA" %}
                        <a href="https://www.rcsb.org/structure/{{ tj.bcdr1_tmplt_id[:4] }}">{{ tj.bcdr1_tmplt_id }}</a>
                      {% else %}
                        NA
                      {% endif %}
                    </td>
		  </tr>
		  <tr>
		    <th scope="row">Tcr &beta; CDR2-HV4</th>
		    <td>
                      {% if tj.bcdr2hv4_tmplt_id != "NA" %}
                        <a href="https://www.rcsb.org/structure/{{ tj.bcdr2hv4_tmplt_id[:4] }}">{{ tj.bcdr2hv4_tmplt_id }}</a>
                      {% else %}
                        NA
                      {% endif %}
                    </td>
		  </tr>
		  <tr>
		    <th scope="row">Tcr &beta; CDR3</th>
		    <td>
                      {% if tj.bcdr3_tmplt_id != "NA" %}
                        <a href="https://www.rcsb.org/structure/{{ tj.bcdr3_tmplt_id[:4] }}">{{ tj.bcdr3_tmplt_id }}</a>
                      {% else %}
                        NA
                      {% endif %}
                    </td>
		  </tr>
		  <tr>
		    <th scope="row">Tcr &beta; framework</th>
		    <td>
                      {% if tj.bfr_tmplt_id != "NA" %}
                        <a href="https://www.rcsb.org/structure/{{ tj.bfr_tmplt_id[:4] }}">{{ tj.bfr_tmplt_id }}</a>
                      {% else %}
                        NA 
                      {% endif %}
                    </td>
		  </tr>
		  <tr>
		    <th scope="row">Tcr &beta; germline</th>
		    <td>
                      {% if tj.bgm_tmplt_id != "NA" %}
                        <a href="https://www.rcsb.org/structure/{{ tj.bgm_tmplt_id[:4] }}">{{ tj.bgm_tmplt_id }}</a>
                      {% else %}
                        NA 
                      {% endif %}
                    </td>
		  </tr>
		  <tr>
		    <th scope="row">Peptide</th>
		    <td>
                      {% if tj.pep_tmplt_id != "NA" %}
                        <a href="https://www.rcsb.org/structure/{{ tj.pep_tmplt_id }}">{{ tj.pep_tmplt_id }}</a>
                      {% else %}
                        NA 
                      {% endif %}
                    </td>
		  </tr>
		  <tr>
		    <th scope="row">MHC I</th>
		    <td>
                      {% if tj.mhc1_tmplt_id != "NA" %}
                        <a href="https://www.rcsb.org/structure/{{ tj.mhc1_tmplt_id }}">{{ tj.mhc1_tmplt_id }}</a>
                      {% else %}
                        NA 
                      {% endif %}
                    </td>
		  </tr>
		  <tr>
		    <th scope="row">MHC II</th>
		    <td>
                      {% if tj.mhc2_tmplt_id != "NA" %}
                        <a href="https://www.rcsb.org/structure/{{ tj.mhc2_tmplt_id }}">{{ tj.mhc2_tmplt_id }}</a>
                      {% else %}
                        NA 
                      {% endif %}
                    </td>
		  </tr>
		  <tr>
		    <th scope="row">TCR orientation</th>
		    <td>
                      {% if tj.aori_tmplt_id != "NA" %}
                        <a href="https://www.rcsb.org/structure/{{ tj.aori_tmplt_id }}">{{ tj.aori_tmplt_id }}</a>
                      {% else %}
                        NA 
                      {% endif %}
                    </td>
		  </tr>
		  <tr>
		    <th scope="row">pMHC orientation</th>
		    <td>
                      {% if tj.pmhc_tmplt_id != "NA" %}
                        <a href="https://www.rcsb.org/structure/{{ tj.pmhc_tmplt_id }}">{{ tj.pmhc_tmplt_id }}</a>
                      {% else %}
                        NA 
                      {% endif %}
                    </td>
		  </tr>
		  <tr>
		    <th scope="row">TCRpMHC orientation</th>
		    <td>
                      {% if tj.tcrpmhc_tmplt_id != "NA" %}
                        <a href="https://www.rcsb.org/structure/{{ tj.tcrpmhc_tmplt_id }}">{{ tj.tcrpmhc_tmplt_id }}</a>
                      {% else %}
                        NA 
                      {% endif %}
                    </td>
		  </tr>
		</tbody>	      
	      </table>
  	    </div>
	  </div>
	</div>
	<div class="accordion-item">
	  <h2 class="accordion-header" id="flush-headingTwo">
	    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwo" aria-expanded="false" aria-controls="flush-collapseTwo">
	      Sequence alignment
	    </button>
	  </h2>
	  <div id="flush-collapseTwo" class="accordion-collapse collapse" aria-labelledby="flush-headingTwo" data-bs-parent="#accordionFlushExample">
	    <div class="accordion-body">
	      <table class="table table-striped table-light table-sm">
		<thead>
		  <tr>
		    <th scope="col">Segments</th>
		    <th scope="col">Template</th>
		    <th scope="col">Alignment</th>
		  </tr>
		</thead>
		<tbody>
		  <tr>
		    <th scope="row">CDR1&alpha;</th>
		    <td>{{ tj.acdr1_tmplt_id }}</td>
		    <td>
		      <ul class="list-inline font-monospace">
			<li class="small list-inline-item">&nbsp;&nbsp;&nbsp;Input:</li>
			<li class="t1ali aaseqali list-inline-item">{{ tj.acdr1_input_seq }}</li>
			<BR>
			<li class="small list-inline-item">Template:</li>
			<li class="t2ali aaseqali list-inline-item">{{ tj.acdr1_tmplt_seq }}</li>
			<BR>
			<li class="small  list-inline-item">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
			<li class="ali list-inline-item">
			  <span class="ast"></span>
			</li>
		      </ul>
		    </td>
		  </tr>
		  <tr>
		    <th scope="row">CDR2&alpha;</th>
		    <td>{{ tj.acdr2hv4_tmplt_id }}</td>
		    <td>
		      <ul class="list-inline font-monospace">
			<li class="small list-inline-item">&nbsp;&nbsp;&nbsp;Input:</li>
			<li class="t1ali aaseqali list-inline-item">{{ tj.acdr2_input_seq }}</li>
			<BR>
			<li class="small list-inline-item">Template:</li>
			<li class="t2ali aaseqali list-inline-item">{{ tj.acdr2_tmplt_seq }}</li>
			<BR>
			<li class="small  list-inline-item">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
			<li class="ali list-inline-item">
			  <span class="ast"></span>
			</li>
		      </ul>
		    </td>
		  </tr>
		  <tr>
		    <th scope="row">CDR3&alpha;</th>
		    <td>{{ tj.acdr3_tmplt_id }}</td>
		    <td>
		      <ul class="list-inline font-monospace">
			<li class="small list-inline-item">&nbsp;&nbsp;&nbsp;Input:</li>
			<li class="t1ali aaseqali list-inline-item">{{ tj.acdr3_input_seq }}</li>
			<BR>
			<li class="small list-inline-item">Template:</li>
			<li class="t2ali aaseqali list-inline-item">{{ tj.acdr3_tmplt_seq }}</li>
			<BR>
			<li class="small  list-inline-item">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
			<li class="ali list-inline-item">
			  <span class="ast"></span>
			</li>
		      </ul>
		    </td>
		  </tr>
		  <tr>
		    <th scope="row">CDR1&beta;</th>
		    <td>{{ tj.bcdr1_tmplt_id }}</td>
		    <td>
		      <ul class="list-inline font-monospace">
			<li class="small list-inline-item">&nbsp;&nbsp;&nbsp;Input:</li>
			<li class="t1ali aaseqali list-inline-item">{{ tj.bcdr1_input_seq }}</li>
			<BR>
			<li class="small list-inline-item">Template:</li>
			<li class="t2ali aaseqali list-inline-item">{{ tj.bcdr1_tmplt_seq }}</li>
			<BR>
			<li class="small  list-inline-item">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
			<li class="ali list-inline-item">
			  <span class="ast"></span>
			</li>
		      </ul>
		    </td>
		  </tr>
		  <tr>
		    <th scope="row">CDR2&beta;</th>
		    <td>{{ tj.bcdr2hv4_tmplt_id }}</td>
		    <td>
		      <ul class="list-inline font-monospace">
			<li class="small list-inline-item">&nbsp;&nbsp;&nbsp;Input:</li>
			<li class="t1ali aaseqali list-inline-item">{{ tj.bcdr2_input_seq }}</li>
			<BR>
			<li class="small list-inline-item">Template:</li>
			  <li class="t2ali aaseqali list-inline-item">{{ tj.bcdr2_tmplt_seq }}</li>
			  <BR>
			<li class="small  list-inline-item">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
			<li class="ali list-inline-item">
			  <span class="ast"></span>
			</li>
		      </ul>
		    </td>
		  </tr>
		  <tr>
		    <th scope="row">CDR3&beta;</th>
		    <td>{{ tj.bcdr3_tmplt_id }}</td>
		    <td>
		      <ul class="list-inline font-monospace">
			<li class="small list-inline-item">&nbsp;&nbsp;&nbsp;Input:</li>
			<li class="t1ali aaseqali list-inline-item">{{ tj.bcdr3_input_seq }}</li>
			<BR>
			<li class="small list-inline-item">Template:</li>
			<li class="t2ali aaseqali list-inline-item">{{ tj.bcdr3_tmplt_seq }}</li>
			<BR>
			<li class="small  list-inline-item">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
			<li class="ali list-inline-item">
			  <span class="ast"></span>
			</li>
		      </ul>
		    </td>
		  </tr>
		  <tr>
		    <th scope="row">Peptide</th>
		    <td>{{ tj.tcrpmhc_tmplt_id }}</td>
		    <td>
		      <ul class="list-inline font-monospace">
			<li class="small list-inline-item">&nbsp;&nbsp;&nbsp;Input:</li>
			<li class="t1ali aaseqali list-inline-item">{{ tj.pep_input_seq }}</li>
			<BR>
			<li class="small list-inline-item">Template:</li>
			<li class="t2ali aaseqali list-inline-item">{{ tj.pep_tmplt_seq }}</li>
			<BR>
			<li class="small  list-inline-item">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</li>
			<li class="ali list-inline-item">
			  <span class="ast"></span>
			</li>
		      </ul>
		    </td>
		  </tr>
		</tbody>
	      </table>
	    </div>
	  </div>
	</div>
	<div class="accordion-item">
	  <h2 class="accordion-header" id="flush-headingThree">
	    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseThree" aria-expanded="false" aria-controls="flush-collapseThree">
	      TCRpMHC segments
	    </button>
	  </h2>
	  <div id="flush-collapseThree" class="accordion-collapse collapse" aria-labelledby="flush-headingThree" data-bs-parent="#accordionFlushExample">
	    <div class="accordion-body table-responsive">
	      <table class="table table-striped table-light table-bordered text-nowrap">
		<thead>
		  <tr>
		    <th>Name</th>
		    <th>Sequence</th>
		  </tr>
		</thead>
		<tbody>
		  <tr>
		    <th scope="row">Tcr &alpha; V domain</th>
		    <td>{{ tj.atruncdomain_input_seq }}</td>
		  </tr>
		  <tr>
		    <th scope="row">Tcr &alpha; framework</th>
		    <td>{{ tj.afr_input_seq }}</td>
		  </tr>
		  <tr>
		    <th scope="row">Tcr &alpha; CDR1</th>
		    <td>{{ tj.acdr1_input_seq }}</td>
		  </tr>
		  <tr>
		    <th scope="row">Tcr &alpha; CDR2-HV4</th>
		    <td>{{ tj.acdr2_input_seq }}</td>
		  </tr>
		  <tr>
		    <th scope="row">Tcr &alpha; CDR3</th>
		    <td>{{ tj.acdr3_input_seq }}</td>
		  </tr>
		  <tr>
		    <th scope="row">Tcr &beta; V domain</th>
		    <td>{{ tj.btruncdomain_input_seq }}</td>
		  </tr>
		  <tr>
		    <th scope="row">Tcr &beta; framework</th>
		    <td>{{ tj.bfr_input_seq }}</td>
		  </tr>
		  <tr>
		    <th scope="row">Tcr &beta; CDR1</th>
		    <td>{{ tj.bcdr1_input_seq }}</td>
		  </tr>
		  <tr>
		    <th scope="row">Tcr &beta; CDR2-HV4</th>
		    <td>{{ tj.bcdr2_input_seq }}</td>
		  </tr>
		  <tr>
		    <th scope="row">Tcr &beta; CDR3</th>
		    <td>{{ tj.bcdr3_input_seq }}</td>
		  </tr>
		  <tr>
		    <th scope="row">Peptide</th>
		    <td>{{ tj.pep_input_seq }}</td>
		  </tr>
		  <tr>
		    <th scope="row">MHC1 &alpha;</th>
		    <td>{{ tj.mhc1a_input_seq }}</td>
		  </tr>
		  <tr>
		    <th scope="row">MHC2 &alpha;</th>
		    <td>{{ tj.mhc2a_input_seq }}</td>
		  </tr>
		  <tr>
		    <th scope="row">MHC2 &beta;</th>
		    <td>{{ tj.mhc2b_input_seq }}</td>
		  </tr>
		</tbody>	      
	      </table>
	    </div>
	  </div>
	</div>
      </div>
    </div>
  </div>
</div>
 
<script>
  var modelfname = {{ modelfname|tojson }}
</script>
<script src="{{ url_for('static', filename = '/js/tcrcomplex2_viewer.js')}}"></script>
<script src='https://cdn.rawgit.com/arose/ngl/v2.0.0-dev.32/dist/ngl.js'></script>
    
{% endblock %}
  
